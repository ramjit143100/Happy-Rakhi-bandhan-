<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Raksha Bandhan!</title>
    <style>
        /* --- General Setup & Theming --- */
        :root {
            --bg-dark-start: #1a0f2d; /* Deep Violet */
            --bg-dark-end: #0c102a;   /* Navy */
            --primary-glow: #ff00ff;  /* Magenta */
            --secondary-glow: #00ffff;/* Cyan */
            --tertiary-glow: #ffd700; /* Gold */
            --whatsapp-green: #25D366;
            --font-family: 'Poppins', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
        }

        /* --- Basic Reset & Full-Screen Layout --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden; /* CRITICAL: Prevents all scrolling */
            font-family: var(--font-family);
            background: var(--bg-dark-start);
            color: #fff;
        }
        
        /* --- Landing Screen (Before Reveal) --- */
        #landing-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(45deg, #ff00ff, #00ffff, #ffeb3b, #ff0000);
            background-size: 400% 400%;
            animation: gradient-shift 15s ease infinite;
            z-index: 100;
            transition: opacity 1.5s ease-out;
            padding: 20px;
        }

        #landing-screen h1 {
            font-size: clamp(2rem, 8vw, 4rem); /* Responsive font size */
            font-weight: 600;
            color: #fff;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
            animation: zoom-in-out 5s ease-in-out infinite;
        }

        #reveal-button {
            margin-top: 30px;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
            background-color: transparent;
            border: 2px solid #fff;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px var(--secondary-glow), 0 0 30px var(--secondary-glow), inset 0 0 15px var(--secondary-glow);
        }

        #reveal-button:hover {
            transform: scale(1.1);
            background-color: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 25px var(--primary-glow), 0 0 50px var(--primary-glow), inset 0 0 25px var(--primary-glow);
        }

        /* --- Main Celebration Page --- */
        #main-celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between; /* Adjusted for better layout */
            padding: 20px 10px;
            background: linear-gradient(135deg, var(--bg-dark-start), var(--bg-dark-end));
            opacity: 0;
            pointer-events: none;
            transition: opacity 1.5s ease-in, filter 0.3s ease;
            z-index: 50;
        }

        /* --- Celebration Effects Containers --- */
        #celebration-canvas, #flower-container, #balloon-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 55;
        }

        /* --- Main Content Styling --- */
        .content-wrapper {
            z-index: 60;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 100%;
            max-width: 600px;
        }
        
        .rakhi-title {
            font-size: clamp(2rem, 10vw, 4.5rem);
            font-weight: 700;
            position: relative;
            animation: disco-lights 5s linear infinite, blinking-light 2s ease-in-out infinite;
            margin-bottom: -10px; /* Small spacing */
        }

        .rakhi-title::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120%;
            height: 150%;
            background: linear-gradient(45deg, var(--primary-glow), var(--secondary-glow));
            filter: blur(40px);
            opacity: 0.7;
            animation: gradient-shift 10s ease infinite;
            z-index: -1;
        }

        #rakhi-image {
            width: 100%;
            max-width: 250px; /* Control max size */
            height: auto;
            border-radius: 20px;
            animation: pulse-alive 4s ease-in-out infinite, gradient-shadow 8s linear infinite;
        }

        #greeting-message {
            font-size: clamp(1.2rem, 4vw, 1.8rem);
            margin-top: 20px;
            padding: 10px 20px;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        #greeting-message::before {
             content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150%;
            height: 200%;
            background: var(--tertiary-glow);
            filter: blur(30px);
            opacity: 0.4;
            z-index: -1;
        }

        #sender-name {
            font-weight: bold;
            animation: color-change-glow 4s linear infinite, blinking-light 2.5s ease-in-out infinite, gentle-zoom 5s ease-in-out infinite;
        }

        /* --- Interactive Controls --- */
        .controls-wrapper {
            z-index: 60;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 400px;
            gap: 15px; /* Spacing between controls */
            margin-top: auto; /* Push to bottom */
            padding-bottom: 20px; /* Padding from edge */
        }
        
        .input-group {
            width: 100%;
            display: flex;
            gap: 10px;
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--secondary-glow);
            background-color: rgba(12, 16, 42, 0.8);
            border-radius: 10px;
            color: #fff;
            font-size: 1rem;
            transition: box-shadow 0.3s;
        }
        
        .input-field::placeholder { color: rgba(255,255,255,0.6); }
        .input-field:focus {
            outline: none;
            box-shadow: 0 0 10px var(--secondary-glow), 0 0 20px var(--secondary-glow);
        }

        #message-input {
            height: 60px; /* Multi-line */
            resize: none;
        }
        
        .button-row {
            display: flex;
            width: 100%;
            justify-content: space-around;
            gap: 10px;
        }
        
        .gift-button {
            flex-grow: 1;
            padding: 12px 15px;
            background: linear-gradient(45deg, var(--primary-glow), #c400c4);
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px var(--primary-glow);
            animation: pulse-glow 2s infinite, bounce 3s infinite ease-in-out;
        }
        
        .gift-button .hand-icon {
            animation: point-down 1.5s infinite;
            margin-left: 5px;
        }
        
        .share-button {
            flex-grow: 1;
            padding: 12px 15px;
            background-color: var(--whatsapp-green);
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .share-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px var(--whatsapp-green);
        }
        
        .share-button svg {
            width: 20px;
            height: 20px;
            margin-right: 8px;
        }

        /* --- GIFT POP-UP STYLES --- */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 999;
            display: none; /* Initially hidden */
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .gift-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 90%;
            max-width: 380px;
            background: var(--bg-dark-end);
            border: 2px solid var(--primary-glow);
            box-shadow: 0 0 20px var(--primary-glow), 0 0 40px var(--primary-glow);
            border-radius: 20px;
            padding: 25px;
            z-index: 1000;
            text-align: center;
            display: none; /* Initially hidden */
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        
        .popup-overlay.show, .gift-popup.show {
            display: block;
            opacity: 1;
        }
        
        .gift-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }
        
        .gift-popup .close-popup {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 2.5rem;
            font-weight: bold;
            color: #fff;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .gift-popup .close-popup:hover {
            transform: scale(1.2);
            color: var(--secondary-glow);
        }
        
        .gift-popup img {
            max-width: 80%;
            border-radius: 15px;
            margin-bottom: 15px;
            border: 2px solid var(--tertiary-glow);
        }
        
        .gift-popup h2 {
            font-size: 2rem;
            color: var(--tertiary-glow);
            text-shadow: 0 0 10px var(--tertiary-glow);
            margin-bottom: 10px;
        }
        
        .gift-popup p {
            font-size: 1rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .popup-gift-button {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(45deg, var(--tertiary-glow), #ffbf00);
            color: var(--bg-dark-start);
            text-decoration: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1rem;
            border: none;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .popup-gift-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--tertiary-glow);
        }


        /* --- Animations Keyframes --- */
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes zoom-in-out {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes disco-lights {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        @keyframes blinking-light {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes pulse-alive {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }
        
        @keyframes gradient-shadow {
            0% { box-shadow: 0 10px 30px -10px rgba(255, 0, 255, 0.4); }
            25% { box-shadow: 0 10px 30px -10px rgba(0, 255, 255, 0.4); }
            50% { box-shadow: 0 10px 30px -10px rgba(255, 215, 0, 0.4); }
            75% { box-shadow: 0 10px 30px -10px rgba(0, 255, 255, 0.4); }
            100% { box-shadow: 0 10px 30px -10px rgba(255, 0, 255, 0.4); }
        }

        @keyframes color-change-glow {
            0% { color: var(--primary-glow); text-shadow: 0 0 10px var(--primary-glow); }
            33% { color: var(--secondary-glow); text-shadow: 0 0 10px var(--secondary-glow); }
            66% { color: var(--tertiary-glow); text-shadow: 0 0 10px var(--tertiary-glow); }
            100% { color: var(--primary-glow); text-shadow: 0 0 10px var(--primary-glow); }
        }

        @keyframes gentle-zoom {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 10px var(--primary-glow); }
            50% { box-shadow: 0 0 20px var(--primary-glow); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        @keyframes point-down {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(3px); }
        }

        /* --- Falling Emojis Animations --- */
        .flower, .balloon {
            position: absolute;
            top: -10%;
            user-select: none;
            pointer-events: none;
            z-index: 56; /* Above rakhi image */
        }

        .flower { animation: fall 10s linear infinite, sway 2s ease-in-out infinite alternate; }
        .balloon { animation: drift 15s linear infinite; filter: brightness(1.5); }

        @keyframes fall {
            to { top: 110%; transform: rotate(360deg); }
        }
        
        @keyframes drift {
            to { top: 110%; }
        }
        
        @keyframes sway {
            from { transform: translateX(-10px) rotate(0deg); }
            to { transform: translateX(10px) rotate(15deg); }
        }
    </style>
</head>
<body>

    <!-- Audio element for background music -->
    <audio id="bg-music" src="rakhi.mp3" loop></audio>

    <!-- 1. Initial Landing Screen -->
    <div id="landing-screen">
        <h1>Special Raksha Bandhan message waiting for you</h1>
        <button id="reveal-button">Click to Reveal</button>
    </div>

    <!-- 2. Main Celebration Page -->
    <div id="main-celebration">
        <!-- Canvas for music-reactive confetti -->
        <canvas id="celebration-canvas"></canvas>
        <!-- Container for falling elements -->
        <div id="flower-container"></div>
        <div id="balloon-container"></div>

        <!-- Main content that is visually centered -->
        <div class="content-wrapper">
            <h1 class="rakhi-title">Happy Raksha Bandhan</h1>
            <img id="rakhi-image" src="rakhi.gif" alt="Animated Rakhi">
            <p id="greeting-message">
                <span id="sender-name">Someone</span> ki taraf se: <span id="custom-message">aapko Raksha Bandhan ki bahut bahut badhai</span>
            </p>
        </div>
        
        <!-- Interactive controls at the bottom -->
        <div class="controls-wrapper">
            <div class="input-group">
                 <input type="text" id="name-input" class="input-field" placeholder="Enter your name">
            </div>
             <textarea id="message-input" class="input-field" placeholder="Type your message"></textarea>
            
            <div class="button-row">
                <!-- This button now opens the pop-up -->
                <button id="open-popup-button" class="gift-button">
                    🎁 Special Rakhi Gifts <span class="hand-icon">👇</span>
                </button>
                
                <a href="#" id="whatsapp-share-button" class="share-button" target="_blank">
                     <svg viewBox="0 0 89 89"><path d="M63.8,88.9c-7.6,0-15.1-2.2-21.5-6.4L1,61.4l1.5-9.3c0,0,0.1-0.5,0.2-1.1c1-5.1,2.9-9.8,5.4-14.1 c2.4-4,5.4-7.5,8.9-10.4c3.5-2.9,7.4-5.1,11.6-6.6c4.2-1.5,8.6-2.3,13.1-2.3c1,0,2.1,0.1,3.1,0.2c5.5,0.4,10.8,2,15.5,4.8 c4.7,2.8,8.6,6.6,11.7,11.3c3.1,4.7,5.1,10,5.8,15.6c0.2,1.3,0.3,2.7,0.3,4c0,7.6-2.2,15.1-6.4,21.5 C79,86.7,71.4,88.9,63.8,88.9z M26.3,73.3l1,0.6c5.5,3.3,11.9,5.1,18.5,5.1c5.5,0,10.9-1.3,15.6-3.8 c4.7-2.5,8.8-6.1,11.9-10.4c3.1-4.4,5-9.5,5.6-14.8c0.1-1.1,0.2-2.3,0.2-3.4c0-5.5-1.3-10.9-3.8-15.6 c-2.5-4.7-6.1-8.8-10.4-11.9c-4.4-3.1-9.5-5-14.8-5.6c-1-0.1-2-0.2-3-0.2c-5.5,0-10.9,1.3-15.6,3.8 c-4.7,2.5-8.8,6.1-11.9,10.4c-3.1,4.4-5,9.5-5.6,14.8c-0.1,1.1-0.2,2.3-0.2,3.4c0,0.3,0,0.6,0,0.9L10.2,58l15.1,13.8 C25.7,72.3,26,72.8,26.3,73.3z"></path><path d="M54.5,59.3l-2.1,3.9c-0.4,0.7-1,1.1-1.7,1.4c-0.7,0.2-1.5,0.3-2.2,0.1c-1.3-0.3-2.6-0.9-3.9-1.7 c-1.3-0.8-2.6-1.7-3.9-2.9c-1.3-1.1-2.5-2.4-3.7-3.8c-1.2-1.4-2.2-3-3.1-4.6c-0.9-1.7-1.5-3.4-1.9-5.2c-0.2-0.7-0.1-1.5,0.1-2.2 c0.2-0.7,0.7-1.4,1.3-1.8l3.9-2.2c0.7-0.4,1.4-0.5,2.2-0.4c0.7,0.2,1.4,0.6,1.8,1.2L42,40.1c0.4,0.7,0.5,1.4,0.4,2.2 c-0.2,0.7-0.6,1.4-1.2,1.8l-1.3,0.7c-0.2,0.1-0.2,0.2-0.2,0.3c0.2,0.8,0.5,1.6,0.9,2.3c0.4,0.7,0.9,1.4,1.4,2 c0.6,0.6,1.1,1.2,1.8,1.7c0.6,0.5,1.3,0.9,2,1.3c0.1,0.1,0.2,0.1,0.3,0l0.8-1.4c0.4-0.7,1.1-1.1,1.8-1.2c0.7-0.2,1.5,0,2.2,0.4 l3.9,2.2C54.1,57.5,54.6,58.6,54.5,59.3z"></path></svg>
                    Share
                </a>
            </div>
        </div>
    </div>

    <!-- 3. Gift Card Pop-up -->
    <div id="popup-overlay" class="popup-overlay"></div>
    <div id="gift-popup" class="gift-popup">
        <span id="close-popup-button" class="close-popup">&times;</span>
        <h2>A Special Surprise!</h2>
        <!-- You can replace this placeholder with your own gift card image -->
        <img src="https://via.placeholder.com/300x180/FFD700/1A0F2D?text=Rakhi+Gift+Card" alt="rakhi.gif">
        <p>A special gift for a special bond. Click below to claim your gift card and discover more presents!</p>
        
                      <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elegant Rakhi Card</title>
    <style>
        /* Import custom fonts for an elegant look */
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;600&display=swap');

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #fde3a7; /* Soft golden yellow background */
            font-family: 'Poppins', sans-serif;
            margin: 0;
        }

        .card {
            width: 380px;
            height: 520px;
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden; /* Hides parts of the mandala that go outside */
            cursor: pointer;
        }

        /* The content inside the card */
        .card-inner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 30px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: #4a4a4a;
        }

        .card-inner h2 {
            font-family: 'Playfair Display', serif; /* Elegant serif font for heading */
            font-size: 2.5em;
            color: #c89d7c; /* Muted brown color */
            margin: 0;
        }

        .card-inner p {
            font-size: 1.1em;
            line-height: 1.7;
            margin: 20px 0;
        }

        .card-inner .signature {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 1.3em;
            color: #c89d7c;
        }
        
        /* The front cover that opens */
        .cover {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #874da2, #c43a30); /* Rich Purple-to-Red Gradient */
            border-radius: 20px;
            transform-origin: left; /* Set the hinge to the left side */
            transition: transform 1s ease-in-out;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 10;
        }

        /* The opening animation on hover */
        .card:hover .cover {
            transform: rotateY(-180deg);
        }

        .cover h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3em;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
            margin: 0;
        }

        .cover p {
            font-size: 1.2em;
            margin-top: 10px;
            letter-spacing: 1px;
        }

        /* Decorative mandala patterns for the background */
        .mandala {
            position: absolute;
            width: 300px;
            height: 300px;
            opacity: 0.1;
            z-index: 0;
        }

        .mandala.top {
            top: -50px;
            left: -50px;
        }

        .mandala.bottom {
            bottom: -50px;
            right: -50px;
            transform: rotate(180deg);
        }
    </style>
</head>
<body>

    <div class="card">
        <!-- The content inside the card -->
        <div class="card-inner">
            <img src="https://www.transparentpng.com/thumb/mandala/3aY627-mandala-design-art-ornamental-decor-ethnic-free-png.png" alt="Mandala" class="mandala top">
            <h2>My Dearest Sibling,</h2>
            <p>On this special day of Raksha Bandhan, I'm sending you all my love. May our beautiful bond of trust and friendship continue to grow stronger every day.</p>
            <p class="signature">With endless love,<br>Your Sibling</p>
            <img src="https://www.transparentpng.com/thumb/mandala/3aY627-mandala-design-art-ornamental-decor-ethnic-free-png.png" alt="Mandala" class="mandala bottom">
        </div>

        <!-- The cover of the card -->
        <div class="cover">
            <h1>Happy Raksha Bandhan</h1>
            <p>(Hover to open)</p>
        </div>
    </div>

</body>
</html>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Element References ---
            const revealButton = document.getElementById('reveal-button');
            const landingScreen = document.getElementById('landing-screen');
            const mainCelebration = document.getElementById('main-celebration');
            const bgMusic = document.getElementById('bg-music');
            
            const senderNameEl = document.getElementById('sender-name');
            const customMessageEl = document.getElementById('custom-message');
            
            const nameInput = document.getElementById('name-input');
            const messageInput = document.getElementById('message-input');
            const whatsappShareButton = document.getElementById('whatsapp-share-button');

            // --- Pop-up Element References ---
            const openPopupButton = document.getElementById('open-popup-button');
            const giftPopup = document.getElementById('gift-popup');
            const popupOverlay = document.getElementById('popup-overlay');
            const closePopupButton = document.getElementById('close-popup-button');
            
            // --- Default Values ---
            let senderName = "Someone";
            let customMessage = "aapko Raksha Bandhan ki bahut bahut badhai";

            // --- Function to update greeting and share link ---
            const updateGreeting = () => {
                senderNameEl.textContent = nameInput.value || senderName;
                customMessageEl.textContent = messageInput.value || customMessage;
                
                const currentName = encodeURIComponent(senderNameEl.textContent);
                const currentMsg = encodeURIComponent(customMessageEl.textContent);
                const pageUrl = `${window.location.origin}${window.location.pathname}?name=${currentName}&msg=${currentMsg}`;
                
                const fullMessage = `${senderNameEl.textContent} ki taraf se: ${customMessageEl.textContent}\n\nCheck it out here:\n${pageUrl}`;
                whatsappShareButton.href = `https://api.whatsapp.com/send?text=${encodeURIComponent(fullMessage)}`;
            };
            
            // --- Check for URL Parameters on Load ---
            const urlParams = new URLSearchParams(window.location.search);
            const nameFromUrl = urlParams.get('name');
            const msgFromUrl = urlParams.get('msg');
            
            if (nameFromUrl) senderName = nameFromUrl;
            if (msgFromUrl) customMessage = msgFromUrl;
            
            // Initialize inputs and greeting
            nameInput.value = nameFromUrl || '';
            messageInput.value = msgFromUrl || '';
            updateGreeting();


            // --- Event Listeners ---
            nameInput.addEventListener('input', updateGreeting);
            messageInput.addEventListener('input', updateGreeting);
            
            revealButton.addEventListener('click', () => {
                landingScreen.style.opacity = '0';
                setTimeout(() => {
                    landingScreen.style.display = 'none';
                }, 1500);

                mainCelebration.style.opacity = '1';
                mainCelebration.style.pointerEvents = 'auto';

                bgMusic.play().catch(e => console.log("Autoplay was blocked by the browser."));
                
                initializeAudioReactiveConfetti();
                startFallingEmojis('flower');
                startFallingEmojis('balloon');
            });

            // --- Pop-up Event Listeners ---
            function showPopup() {
                popupOverlay.classList.add('show');
                giftPopup.classList.add('show');
                mainCelebration.style.filter = 'blur(5px)';
            }

            function hidePopup() {
                popupOverlay.classList.remove('show');
                giftPopup.classList.remove('show');
                mainCelebration.style.filter = 'none';
            }

            openPopupButton.addEventListener('click', showPopup);
            closePopupButton.addEventListener('click', hidePopup);
            popupOverlay.addEventListener('click', hidePopup);
            
            // --- Celebration Effects ---
            
            const flowerEmojis = ['🌸', '🌺', '🌼', '🌷', '💐', '💖', '✨'];
            const balloonEmojis = ['🎈']; 
            
            function startFallingEmojis(type) {
                const container = document.getElementById(type === 'flower' ? 'flower-container' : 'balloon-container');
                const emojis = type === 'flower' ? flowerEmojis : balloonEmojis;
                const density = 20; 
                
                setInterval(() => {
                    const emojiEl = document.createElement('div');
                    emojiEl.classList.add(type);
                    emojiEl.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    
                    emojiEl.style.left = `${Math.random() * 100}vw`;
                    emojiEl.style.fontSize = `${Math.random() * 1.5 + 0.8}rem`;
                    
                    if (type === 'flower') {
                        emojiEl.style.animationDuration = `${Math.random() * 5 + 8}s`;
                        emojiEl.style.filter = `blur(${Math.random() * 1}px)`;
                    } else { 
                        emojiEl.style.animationDuration = `${Math.random() * 10 + 10}s`;
                        const color = ['var(--primary-glow)', 'var(--secondary-glow)', 'var(--tertiary-glow)'][Math.floor(Math.random() * 3)];
                        emojiEl.style.textShadow = `0 0 10px ${color}, 0 0 20px ${color}`;
                    }
                    
                    container.appendChild(emojiEl);
                    
                    setTimeout(() => {
                        emojiEl.remove();
                    }, 18000);
                    
                }, 10000 / density);
            }

            function initializeAudioReactiveConfetti() {
                const canvas = document.getElementById('celebration-canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;

                let audioContext, analyser, dataArray, source;
                let particles = [];
                const colors = ['#ff00ff', '#00ffff', '#ffd700', '#ffffff'];

                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    analyser = audioContext.createAnalyser();
                    source = audioContext.createMediaElementSource(bgMusic);
                    
                    source.connect(analyser);
                    analyser.connect(audioContext.destination);
                    analyser.fftSize = 128;

                    const bufferLength = analyser.frequencyBinCount;
                    dataArray = new Uint8Array(bufferLength);
                } catch(e) {
                    console.error("Web Audio API is not supported or failed to initialize.", e);
                    return; 
                }

                function createParticle(x, y, intensity) {
                    const count = Math.min(20, Math.floor(intensity / 10));
                    for (let i = 0; i < count; i++) {
                        particles.push({
                            x: x,
                            y: y,
                            vx: (Math.random() - 0.5) * 8,
                            vy: (Math.random() - 0.5) * 8,
                            life: Math.random() * 50 + 50,
                            color: colors[Math.floor(Math.random() * colors.length)],
                            size: Math.random() * 3 + 1,
                        });
                    }
                }
                
                let lastBeat = 0;
                function animate() {
                    requestAnimationFrame(animate);

                    if(!analyser) return;
                    analyser.getByteFrequencyData(dataArray);
                    
                    let sum = 0;
                    for(let i = 0; i < dataArray.length; i++) {
                        sum += dataArray[i];
                    }
                    const average = sum / dataArray.length;

                    if (average > lastBeat + 2 && average > 40) { 
                        createParticle(Math.random() * canvas.width, Math.random() * canvas.height, average);
                        lastBeat = average;
                    } else {
                        lastBeat *= 0.95; 
                    }

                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    for (let i = particles.length - 1; i >= 0; i--) {
                        const p = particles[i];
                        p.x += p.vx;
                        p.y += p.vy;
                        p.life--;

                        if (p.life <= 0) {
                            particles.splice(i, 1);
                            continue;
                        }

                        ctx.globalAlpha = p.life / 100;
                        ctx.fillStyle = p.color;
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.globalAlpha = 1.0;
                    }
                }
                animate();

                window.addEventListener('resize', () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                });
            }
        });
    </script><script type='text/javascript' src='//pl27374914.profitableratecpm.com/26/29/27/2629270c1e4820e969cb4fa5a2852a36.js'></script>
</body>
</html>
